(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a(51)},35:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(4),c=a.n(s),o=(a(35),a(11)),l=a(10),i=a(23),u=a(24),m=a(12),f=a.n(m),p=a(14),d="https://frontend-test-assignment-api.abz.agency/api/v1",_="".concat(d,"/users"),h="".concat(d,"/token"),E="".concat(d,"/positions"),b=function(){var e=Object(p.a)(f.a.mark(function e(t){var a,n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return function(a){b("".concat(_,"?page=").concat(e,"&count=").concat(t)).then(function(e){return a({type:"SET_USERS_FROM_SERVER",payload:e})})}},g=Object(u.a)(function(e){return e.usersFromServer},function(e){return void 0===e.users?[]:e.users}),N=function(e){return e.usersFromServer},O=Object(l.c)({usersFromServer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS_FROM_SERVER":return t.payload;default:return e}}}),j=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,x=[i.a],S=Object(l.e)(O,j(l.a.apply(void 0,x))),k=(a(41),function(){return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"header__content"},r.a.createElement("a",{href:"#register-section",className:"header__logo"},r.a.createElement("img",{src:"./images/logo.svg",alt:"logo"})),r.a.createElement("nav",{className:"header__nav"},r.a.createElement("ul",{className:"nav"},r.a.createElement("li",{className:"nav__item"},r.a.createElement("a",{href:"#register-section"},"About me")),r.a.createElement("li",{className:"nav__item"},r.a.createElement("a",{href:"#register-section"},"Relationships")),r.a.createElement("li",{className:"nav__item"},r.a.createElement("a",{href:"#register-section"},"Requirements")),r.a.createElement("li",{className:"nav__item"},r.a.createElement("a",{href:"#register-section"},"Users")),r.a.createElement("li",{className:"nav__item"},r.a.createElement("a",{href:"#register-section"},"Sign Up")))))))}),y=(a(42),a(43),a(7)),w=a.n(y),X=function(e){var t=e.className,a=e.value,n=e.onClick,s=e.type,c=e.hidden;return r.a.createElement("button",{type:s,className:w()([t,"button",{button_hidden:c}]),onClick:n},a)};X.defaultProps={className:"",onClick:null,type:"button",hidden:!1};a(44),a(45),a(46);var R=a(66),F=function(e){var t=e.name,a=e.email,n=e.phone,s=e.position,c=e.photo;return r.a.createElement("article",{className:"user-card"},r.a.createElement("img",{src:c,alt:"user",className:"user-card__user-photo"}),r.a.createElement(R.a,{title:t},r.a.createElement("h1",{className:"user-card__user-name ellipsis"},t)),r.a.createElement("h2",{className:"user-card__user-position"},s),r.a.createElement(R.a,{title:a},r.a.createElement("p",{className:"user-card__user-email ellipsis"},a)),r.a.createElement("p",{className:"user-card__user-phone"},n))},M=function(e){var t=e.usersFromServer,a=e.usersInfoFromServer,s=e.loadUsersInfoFromServer;Object(n.useEffect)(function(){s()},[]);return r.a.createElement("section",{className:"users section"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"users__content"},r.a.createElement("h2",{className:"users__heading"},"Our cheerful users"),r.a.createElement("p",{className:"users__description"},"Attention! Sorting users by registration date"),r.a.createElement("ul",{className:"users__list"},t.map(function(e){var t=e.id,a=e.name,n=e.phone,s=e.photo,c=e.position,o=e.email;return r.a.createElement("li",{key:t},r.a.createElement(F,{name:a,phone:n,position:c,photo:s,email:o}))})),r.a.createElement(X,{onClick:function(){s(1,a.count+6)},value:"Show more",className:"users__show-more-button",hidden:a.count>=a.total_users}))))};M.defaultProps={usersFromServer:[]};var z={loadUsersInfoFromServer:v},C=(Object(o.b)(function(e){return{usersFromServer:g(e),usersInfoFromServer:N(e)}},z)(M),a(2)),I=(a(47),a(6)),U=(a(48),function(e){var t=e.type,a=e.name,n=e.placeholder,s=e.callbacks,c=e.filledWithError,o=e.hadError,l=e.errorMessage,i=e.className,u=e.value,m=e.label,f=e.reflink;return r.a.createElement("label",{className:w()(["input__label",Object(I.a)({},i,void 0!==i)])},r.a.createElement("div",{className:"input__label-name"},m),r.a.createElement("input",{ref:f,type:t,name:a,placeholder:n,className:w()(["input",{"input__had-error":o,"input__error-filled":c}]),onChange:function(e){var t=e.target;s[0](!1),s[1](t.value)},value:u}),r.a.createElement("div",{className:"input__error-message"},(o||c)&&l))});U.defaultProps={type:"text",placeholder:"",filledWithError:!1,hadError:!1,errorMessage:"Error",className:"",value:"",label:"",reflink:void 0};a(49);var P=function(e){var t=e.errorMessage,a=e.closeModalCallback;return r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal__window"},r.a.createElement("div",{className:"modal__heading-container"},r.a.createElement("div",{className:"modal__heading"},!t&&"Congratulations",t&&"Error"),r.a.createElement("button",{type:"button",onClick:a,className:"modal__close-button"})),r.a.createElement("div",{className:"modal__message"},t&&t,!t&&"You have successfully passed the registration"),r.a.createElement(X,{value:t?"Try again":"Great",className:"modal__great-button",onClick:a})))};P.defaultProps={};var T={loadUsersInfoFromServer:v};Object(o.b)(function(e){return{}},T)(function(e){var t=e.loadUsersInfoFromServer,a=Object(n.useState)([]),s=Object(C.a)(a,2),c=s[0],o=s[1];Object(n.useEffect)(function(){b(E).then(function(e){return o(e.positions)})},[]);var l=Object(n.useState)(""),i=Object(C.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)(!1),v=Object(C.a)(d,2),g=v[0],N=v[1],O=u.length>0&&(u.trim().length<2||u.length>60),j=Object(n.useRef)(),x=Object(n.useState)(""),S=Object(C.a)(x,2),k=S[0],y=S[1],R=Object(n.useState)(!1),F=Object(C.a)(R,2),M=F[0],z=F[1],I=Object(n.useMemo)(function(){return(k.match(/(^(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$)/)||[]).length<1&&k.length>0},[k]),T=Object(n.useRef)(null),V=Object(n.useState)(""),A=Object(C.a)(V,2),D=A[0],W=A[1],Y=Object(n.useState)(!1),$=Object(C.a)(Y,2),B=$[0],J=$[1],L=Object(n.useMemo)(function(){return(D.match(/(^[\+]{0,1}380([0-9]{9})$)/)||[]).length<2&&D.length>0},[D]),q=Object(n.useRef)(null),G=Object(n.useState)(""),H=Object(C.a)(G,2),K=H[0],Q=H[1],Z=Object(n.useState)(!1),ee=Object(C.a)(Z,2),te=ee[0],ae=ee[1],ne=function(e){var t=e.target;ae(!1),Q(+t.value)},re=Object(n.useRef)(null),se=Object(n.useState)("Upload your photo"),ce=Object(C.a)(se,2),oe=ce[0],le=ce[1],ie=Object(n.useState)(!1),ue=Object(C.a)(ie,2),me=ue[0],fe=ue[1],pe=Object(n.useState)(!1),de=Object(C.a)(pe,2),_e=de[0],he=de[1],Ee=Object(n.useRef)(null);Object(n.useEffect)(function(){if("string"!==typeof oe){var e=document.createElement("img");e.onload=function(){e.width*e.height<4900||oe.size>5242880||"No file chosen"===oe?fe(!0):fe(!1)};var t=new FileReader;t.onloadend=function(t){e.src=t.target.result},t.readAsDataURL(oe)}},[oe]);var be=Object(n.useState)(!1),ve=Object(C.a)(be,2),ge=ve[0],Ne=ve[1],Oe=Object(n.useState)(!1),je=Object(C.a)(Oe,2),xe=je[0],Se=je[1],ke=function(e,t){return[e,t]};return r.a.createElement("section",{id:"register-section",className:"register"},r.a.createElement("div",{className:"container"},r.a.createElement("p",{className:"register__heading"},"Register to get a work"),r.a.createElement("p",{className:"register__description"},"Attention! After successful registration and alert, update the list of users in the block from the top"),r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),O||""===u)return j.current.scrollIntoView({block:"center",inline:"nearest"}),void N(!0);if(I||""===k)return T.current.scrollIntoView({block:"center",inline:"nearest"}),void z(!0);if(L||""===D)return q.current.scrollIntoView({block:"center",inline:"nearest"}),void J(!0);if(""===K)return re.current.scrollIntoView({block:"center",inline:"nearest"}),void ae(!0);if("string"===typeof oe||me)return Ee.current.scrollIntoView({block:"center",inline:"nearest"}),void he(!0);var a=new FormData;a.append("position_id",K),a.append("name",u),a.append("email",k),a.append("phone",D),a.append("photo",oe),function(){var e=Object(p.a)(f.a.mark(function e(){var n;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(h);case 2:n=e.sent,fetch(_,{method:"POST",body:a,headers:{Token:n.token}}).then(function(e){return e.json()}).then(function(e){e.success?t(1,6):(Ne(e.message),W(""),J(!0),z(!0),y(""))}).finally(function(){Se(!0)});case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()()},action:"#",className:"register__form"},r.a.createElement(U,{reflink:j,type:"text",name:"name",placeholder:"Your name",filledWithError:O,hadError:g,errorMessage:"Error! Username should contain 2-60 characters",className:"register__name-input",callbacks:ke(N,m),value:u,label:"Name"}),r.a.createElement(U,{reflink:T,type:"email",name:"email",placeholder:"Your email",filledWithError:I,hadError:M,errorMessage:"Error! Your email have to be in\n              format youremail@example.com",className:"register__email-input",callbacks:ke(z,y),value:k,label:"Email"}),r.a.createElement(U,{reflink:q,type:"tel",name:"phoneNumber",placeholder:"+380 XX XXX XX XX",filledWithError:L,hadError:B,errorMessage:"Error! \u0415nter phone number in format +380 XX XXX XX XX",className:"register__phone-input",callbacks:ke(J,W),value:D,label:"Phone number"}),r.a.createElement("div",{ref:re,className:w()(["register__positions","positions",{"positions__had-error":te}])},r.a.createElement("div",{className:"positions__heading"},"Select your position"),c.map(function(e,t){return r.a.createElement("div",{key:e.id,className:"positions__item"},r.a.createElement("label",null,r.a.createElement("span",{className:w()(["positions__icon",{positions__icon_checked:+K===e.id}])}),r.a.createElement("input",{className:"positions__input",onChange:ne,type:"radio",name:"position",value:e.id}),e.name))}),r.a.createElement("div",{className:"positions__error-message"},te&&"Error! no chosen position")),r.a.createElement("label",{ref:Ee,className:w()(["register__input-file","input-file"])},r.a.createElement("div",{className:"input-file__heading"},"Photo"),r.a.createElement("input",{accept:"image/jpeg",onChange:function(e){var t=e.target;0!==t.files.length?(he(!1),le(t.files[0])):le("No file chosen")},onClick:function(e){e.target,le("No file chosen")},type:"file",className:"input-file__input"}),r.a.createElement("div",{className:w()(["input-file__container",{"input-file__error":"No file chosen"===oe||me||_e}])},r.a.createElement("span",{className:"input-file__name"},void 0!==oe&&"string"!==typeof oe?oe.name:oe),r.a.createElement("div",{className:"input-file__browse-button"},"Browse")),r.a.createElement("div",{className:"input-file__error-message"},"No file chosen"===oe||_e?"Error! no file chosen":me&&"Error! Minimum size of photo 70x70px.\n              The photo size must not be greater than 5 Mb.")),r.a.createElement(X,{value:"Sing up now",className:"register__submit",type:"submit"}))),xe&&r.a.createElement(P,{errorMessage:ge,closeModalCallback:function(){Ne(!1),Se(!1)}}))}),a(50);var V=function(){return r.a.createElement(o.a,{store:S},r.a.createElement(k,null))};c.a.render(r.a.createElement(V,null),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.00bddd93.chunk.js.map